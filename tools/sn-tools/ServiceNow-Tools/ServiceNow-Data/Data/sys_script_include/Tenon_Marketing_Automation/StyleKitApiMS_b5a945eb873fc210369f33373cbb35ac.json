{
  "_metadata": {
    "table": "sys_script_include",
    "sys_id": "b5a945eb873fc210369f33373cbb35ac",
    "extracted_at": "2025-09-19T21:48:29.320Z",
    "display_value": "StyleKitApiMS",
    "application": "Tenon_Marketing_Automation",
    "scope": {
      "display_value": "Tenon Marketing Automation",
      "link": "https://tenonworkstudio.service-now.com/api/now/table/sys_scope/5e9f5f8b87420250369f33373cbb3559",
      "value": "5e9f5f8b87420250369f33373cbb3559"
    }
  },
  "client_callable": {
    "value": "false",
    "display_value": "false"
  },
  "access": {
    "value": "package_private",
    "display_value": "This application scope only"
  },
  "mobile_callable": {
    "value": "false",
    "display_value": "false"
  },
  "sys_mod_count": {
    "value": "216",
    "display_value": "216"
  },
  "active": {
    "value": "true",
    "display_value": "true"
  },
  "description": {
    "value": "",
    "display_value": ""
  },
  "sys_updated_on": {
    "value": "2025-04-10 02:00:36",
    "display_value": "2025-04-09 07:00:36 PM"
  },
  "sys_tags": {
    "value": "",
    "display_value": ""
  },
  "sandbox_callable": {
    "value": "false",
    "display_value": "false"
  },
  "script": {
    "value": "var StyleKitApiMS = Class.create();\nStyleKitApiMS.prototype = {\n    initialize: function() {},\n\t\n/**************** CREATE STYLE KIT ****************/\n\tcreateStyleKit: function(request, response) {\n\t\tvar requestBody = request.body.data;\n\t\t\n\t\tvar colorIds = [];\n\t\tvar fontIds = [];\n\t\tvar socialMediaIds = [];\n\t\t\n\t\tif (requestBody.colors && Array.isArray(requestBody.colors)) {\n\t\t\trequestBody.colors.forEach(function(color) {\n\t\t\t\tvar colorGR = new GlideRecord(\"x_cadso_automate_style_kit_color\");\n\t\t\t\tcolorGR.initialize();\n\t\t\t\tcolorGR.color = color;\n\t\t\t\tvar colorId = colorGR.insert();\n\t\t\t\tif (colorId) {\n\t\t\t\t\tcolorIds.push(colorId);\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t\t\n\t\tif (requestBody.fonts && Array.isArray(requestBody.fonts)) {\n\t\t\trequestBody.fonts.forEach(function(font) {\n\t\t\t\tvar fontGR = new GlideRecord(\"x_cadso_automate_style_kit_font\");\n\t\t\t\tfontGR.initialize();\n\t\t\t\tfontGR.name = font.name || '';\n\t\t\t\tfontGR.font_family = font.fontFamily || '';\n\t\t\t\tfontGR.url = font.url && font.url.trim() !== '' ? font.url : '';\n\t\t\t\tfontGR.active = font.active || false;\n\t\t\t\tfontGR.custom = font.custom || false;\n\n\t\t\t\tvar fontId = fontGR.insert();\n\t\t\t\tif (fontId) {\n\t\t\t\t\tfontIds.push(fontId);\n\t\t\t\t}\n\t\t\t});\n    }\n\t\t\n\t\tif (requestBody.socialIcons && Array.isArray(requestBody.socialIcons)) {\n\t\t\trequestBody.socialIcons.forEach(function(socialIcon) {\n\t\t\t\tvar socialGR = new GlideRecord(\"x_cadso_automate_style_kit_social_media\");\n\t\t\t\tsocialGR.initialize();\n\t\t\t\tsocialGR.type = socialIcon.type || '';\n\t\t\t\tsocialGR.name = socialIcon.name || '';\n\t\t\t\tsocialGR.image_prefix = socialIcon.image.prefix || '';\n\t\t\t\tsocialGR.image_alt = socialIcon.image.alt || '';\n\t\t\t\tsocialGR.image_src = socialIcon.image.src || '';\n\t\t\t\tsocialGR.image_title = socialIcon.image.title || '';\n\t\t\t\tsocialGR.image_href = socialIcon.image.href || '';\n\t\t\t\tsocialGR.text = socialIcon.text || '';\n\n\t\t\t\tvar socialId = socialGR.insert();\n\t\t\t\tif (socialId) {\n\t\t\t\t\tsocialMediaIds.push(socialId);\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t\t\n\t\tvar styleKitGR = new GlideRecord(\"x_cadso_automate_style_kit\");\n\t\tstyleKitGR.initialize();\n\t\t\n\t\tstyleKitGR.brand_name = requestBody.brandName || 'New Style Kit';\n\t\tstyleKitGR.title_font_size_scale = requestBody.header.fontScale || '';\n\t\tvar fontScalesOptions = ['38px,30px,24px', '64px,44px,32px', '110px,68px,42px'];\n\t\tvar fontScale = requestBody.header.fontScale || '';\n\t\tif (fontScalesOptions.indexOf(fontScale) !== -1) {\n\t\t\tstyleKitGR.title_font_size_scale = fontScale;\n\t\t}\n\t\tstyleKitGR.text_font_size = requestBody.text.fontSize || '';\n\t\tstyleKitGR.text_line_height = requestBody.text.lineHeight || '';\n\t\t\t\t\n\t\tstyleKitGR.email_width_default = requestBody.contentWidths.email || '';\n\t\tstyleKitGR.page_width_default = requestBody.contentWidths.page || '';\n\t\t\n\t\tvar styleKitId = styleKitGR.insert();\n\n\t\tif (styleKitId) {\n\n\t\t\tthis.updateRelatedRecords(\"x_cadso_automate_style_kit_color\", colorIds, styleKitId);\n            this.updateRelatedRecords(\"x_cadso_automate_style_kit_font\", fontIds, styleKitId);\n            this.updateRelatedRecords(\"x_cadso_automate_style_kit_social_media\", socialMediaIds, styleKitId);\n\n\t\t\tstyleKitGR.title_font = this.getReferenceId(\"x_cadso_automate_style_kit_font\", requestBody.header.font.name);\n\t\t\tstyleKitGR.title_default_color = this.getColorValue(\"x_cadso_automate_style_kit_color\", requestBody.header.textColor);\n\t\t\tstyleKitGR.text_font = this.getReferenceId(\"x_cadso_automate_style_kit_font\", requestBody.text.font.name);\n\t\t\tstyleKitGR.text_default_color = this.getColorValue(\"x_cadso_automate_style_kit_color\", requestBody.text.textColor);\n\t\t\tstyleKitGR.text_link_color = this.getColorValue(\"x_cadso_automate_style_kit_color\", requestBody.text.linkColor);\n\t\t\tstyleKitGR.button_font = this.getReferenceId(\"x_cadso_automate_style_kit_font\", requestBody.button.font.name);\n\t\t\tstyleKitGR.button_text_color = this.getColorValue(\"x_cadso_automate_style_kit_color\", requestBody.button.textColor);\n\t\t\tstyleKitGR.button_background_color = this.getColorValue(\"x_cadso_automate_style_kit_color\", requestBody.button.backgroundColor);\n\t\t\tif (requestBody.socialIcons && requestBody.socialIcons.length > 0) {\n\t\t\t\tvar socialIds = requestBody.socialIcons.map(function(icon) {\n\t\t\t\t\treturn this.getReferenceId(\"x_cadso_automate_style_kit_social_media\", icon.name);\n\t\t\t\t}, this);\n\t\t\t\tstyleKitGR.social_links = socialIds.join(',');\n\t\t\t}        \n\t\t\tstyleKitGR.update();\n\n\t\t\tresponse.setStatus(201);\n\t\t\tresponse.setBody({\n\t\t\t\tsuccess: true,\n\t\t\t\tmessage: \"Style Kit created successfully.\",\n\t\t\t\tstyleKitId: styleKitId\n\t\t\t});\n\t\t} else {\n\t\t\tresponse.setStatus(500);\n\t\t\tresponse.setBody({\n\t\t\t\tsuccess: false,\n\t\t\t\tmessage: 'Failed to create Style Kit.'\n\t\t\t});\n\t\t}\n\t},\n\n\tupdateRelatedRecords: function(tableName, recordIds, styleKitId) {\n\t\trecordIds.forEach(function(recordId) {\n\t\t\tvar gr = new GlideRecord(tableName);\n\t\t\tif (gr.get(recordId)) {\n\t\t\t\tgr.style_kit = styleKitId;\n\t\t\t\tgr.update();\n\t\t\t}\n\t\t});\n\t},\n\n\tgetColorValue: function(tableName, color) {\n\t\tvar tableGR = new GlideRecord(tableName);\n\t\ttableGR.addQuery('color', color);\n\t\ttableGR.query();\n\t\tif (tableGR.next()) {\n\t\t\treturn tableGR.color;\n\t\t} else {\n\t\t\treturn '';\n\t\t}\n\t},\n\n\tgetReferenceId: function(tableName, name) {\n\t\tvar tableGR = new GlideRecord(tableName);\n\t\ttableGR.addQuery('name', name);\n\t\ttableGR.query();\n\t\tif (tableGR.next()) {\n\t\t\treturn tableGR.getUniqueValue();\n\t\t} else {\n\t\t\treturn '';\n\t\t}\n\t},\n\n\t/**************** GET STYLE KIT ****************/\n\tgetStyleKit: function(request, response) {\n\t\tvar styleKitId = request.pathParams.sys_id;\n\n\t\tif (!styleKitId) {\n\t\t\tresponse.setStatus(400);\n\t\t\tresponse.setBody({\n\t\t\t\tsuccess: false,\n\t\t\t\tmessage: 'Style Kit ID is required.'\n\t\t\t});\n\t\t\treturn;\n\t\t}\n\n\t\tvar styleKitGR = new GlideRecord(\"x_cadso_automate_style_kit\");\n\t\tif (!styleKitGR.get(styleKitId)) {\n\t\t\tresponse.setStatus(404);\n\t\t\tresponse.setBody({\n\t\t\t\tsuccess: false,\n\t\t\t\tmessage: 'Style Kit not found.'\n\t\t\t});\n\t\t\treturn;\n\t\t}\n\n\t\tvar colorVals = this.getRelatedRecordIds(\"x_cadso_automate_style_kit_color\", styleKitId);\n\t\tvar fontIds = this.getRelatedRecordIds(\"x_cadso_automate_style_kit_font\", styleKitId);\n\t\tvar socialMediaIds = this.getRelatedRecordIds(\"x_cadso_automate_style_kit_social_media\", styleKitId);\n\n\t\tvar colors = colorVals.map(function(colorVal) {\n\t\t\treturn this.getColorDetails(colorVal);\n\t\t}, this);\n\n\t\tvar fonts = fontIds.map(function(fontId) {\n\t\t\treturn this.getFontDetails(fontId);\n\t\t}, this);\n\n\t\tvar styleKitData = {\n\t\t\tsysId: styleKitGR.getUniqueValue(),\n\t\t\tbrandName: styleKitGR.brand_name,\n\t\t\tcolors: colors,\n\t\t\tfonts: fonts,\n\t\t\tcontentWidths: {\n\t\t\t\temail: styleKitGR.email_width_default,\n\t\t\t\tpage: styleKitGR.page_width_default\n\t\t\t},\n\t\t\theader: {\n\t\t\t\tfont: this.getFontDetails(styleKitGR.title_font),\n\t\t\t\tfontScale: styleKitGR.title_font_size_scale,\n\t\t\t\ttextColor: this.getRefColors(styleKitGR.title_default_color)\n\t\t\t},\n\t\t\ttext: {\n\t\t\t\tfont: this.getFontDetails(styleKitGR.text_font),\n\t\t\t\tfontSize: styleKitGR.text_font_size,\n\t\t\t\ttextColor: this.getRefColors(styleKitGR.text_default_color),\n\t\t\t\tlinkColor: this.getRefColors(styleKitGR.text_link_color),\n\t\t\t\tlineHeight: styleKitGR.text_line_height\n\t\t\t},\n\t\t\tbutton: {\n\t\t\t\tfont: this.getFontDetails(styleKitGR.button_font),\n\t\t\t\tbackgroundColor: this.getRefColors(styleKitGR.button_background_color),\n\t\t\t\ttextColor: this.getRefColors(styleKitGR.button_text_color)\n\t\t\t},\n\t\t\tsocialIcons: this.getSocialMediaDetails(styleKitGR.social_links)\n\t\t};\n\n\t\tresponse.setStatus(200);\n\t\tresponse.setBody({\n\t\t\tsuccess: true,\n\t\t\tdata: styleKitData\n\t\t});\n\t},\n\n\t/**************** GET STYLE KITS ****************/\n\tgetStyleKits: function(query) {\n\t\tlet response_body = [];\n\t\tvar styleKitGR = new GlideRecordSecure(\"x_cadso_automate_style_kit\");\n\t\tif (query) {\n\t\t\tstyleKitGR.addEncodedQuery(query);\n\t\t}\n\t\tstyleKitGR.query();\n\t\twhile (styleKitGR.next()) {\n\t\t\tconst styleKitId = styleKitGR.getUniqueValue();\n\t\t\tvar colorVals = this.getRelatedRecordIds(\"x_cadso_automate_style_kit_color\", styleKitId);\n\t\t\tvar fontIds = this.getRelatedRecordIds(\"x_cadso_automate_style_kit_font\", styleKitId);\n\t\t\tvar socialMediaIds = this.getRelatedRecordIds(\"x_cadso_automate_style_kit_social_media\", styleKitId);\n\n\t\t\tvar colors = colorVals.map(function(colorVal) {\n\t\t\t\treturn this.getColorDetails(colorVal);\n\t\t\t}, this);\n\n\t\t\tvar fonts = fontIds.map(function(fontId) {\n\t\t\t\treturn this.getFontDetails(fontId);\n\t\t\t}, this);\n\n\t\t\tvar styleKitData = {\n\t\t\t\tsysId: styleKitGR.getUniqueValue(),\n\t\t\t\tbrandName: styleKitGR.brand_name,\n\t\t\t\tcolors: colors,\n\t\t\t\tfonts: fonts,\n\t\t\t\tcontentWidths: {\n\t\t\t\t\temail: styleKitGR.email_width_default,\n\t\t\t\t\tpage: styleKitGR.page_width_default\n\t\t\t\t},\n\t\t\t\theader: {\n\t\t\t\t\tfont: this.getFontDetails(styleKitGR.title_font),\n\t\t\t\t\tfontScale: styleKitGR.title_font_size_scale,\n\t\t\t\t\ttextColor: this.getRefColors(styleKitGR.title_default_color)\n\t\t\t\t},\n\t\t\t\ttext: {\n\t\t\t\t\tfont: this.getFontDetails(styleKitGR.text_font),\n\t\t\t\t\tfontSize: styleKitGR.text_font_size,\n\t\t\t\t\ttextColor: this.getRefColors(styleKitGR.text_default_color),\n\t\t\t\t\tlinkColor: this.getRefColors(styleKitGR.text_link_color),\n\t\t\t\t\tlineHeight: styleKitGR.text_line_height\n\t\t\t\t},\n\t\t\t\tbutton: {\n\t\t\t\t\tfont: this.getFontDetails(styleKitGR.button_font),\n\t\t\t\t\tbackgroundColor: this.getRefColors(styleKitGR.button_background_color),\n\t\t\t\t\ttextColor: this.getRefColors(styleKitGR.button_text_color)\n\t\t\t\t},\n\t\t\t\tsocialIcons: this.getSocialMediaDetails(styleKitGR.social_links)\n\t\t\t};\n\n\t\t\tresponse_body.push(styleKitData);\n\t\t}\n\t\t\n\t\tresponse.setStatus(200);\n\t\tresponse.setBody({\n\t\t\tsuccess: true,\n\t\t\tdata: response_body\n\t\t});\n\t},\n\n\tgetRelatedRecordIds: function(tableName, styleKitId) {\n\t\tvar ids = [];\n\t\tvar tableGR = new GlideRecord(tableName);\n\t\ttableGR.addQuery('style_kit', styleKitId);\n\t\ttableGR.query();\n\t\twhile (tableGR.next()) {\n\t\t\tif (tableName === 'x_cadso_automate_style_kit_color') {\n\t\t\t\tids.push(tableGR.color.toString());\n\t\t\t} else {\n\t\t\t\tids.push(tableGR.getUniqueValue());\n\t\t\t}\n\t\t}\n\t\treturn ids;\n\t},\n\n\tgetFontDetails: function(fontId) {\n\t\tvar fontGR = new GlideRecord(\"x_cadso_automate_style_kit_font\");\n\n\t\tif (fontGR.get(fontId)) {\n\t\t\treturn {\n\t\t\t\tactive: fontGR.active,\n\t\t\t\tcustom: fontGR.custom,\n\t\t\t\tname: fontGR.name,\n\t\t\t\tfontFamily: fontGR.font_family,\n\t\t\t\turl: fontGR.url\n\t\t\t};\n\t\t} else {\n\t\t\treturn null;\n\t\t}\n\t},\n\n\tgetColorDetails: function(colorVal) {\n\t\tvar colorGR = new GlideRecord(\"x_cadso_automate_style_kit_color\");\n\t\tcolorGR.addQuery('color', colorVal);\n\t\tcolorGR.query();\n\n\t\tif (colorGR.next()) {\n\t\t\treturn colorGR.color;\n\t\t} else {\n\t\t\treturn null;\n\t\t}\n\t},\n\n\tgetRefColors: function(colorId) {\n\t\tvar colorGR = new GlideRecord(\"x_cadso_automate_style_kit_color\");\n\n\t\tif (colorGR.get(colorId)) {\n\t\t\treturn colorGR.color;\n\t\t} else {\n\t\t\treturn null;\n\t\t}\n\t},\n\n\tgetSocialMediaDetails: function(socialIds) {\n\t\tvar socialMediaDetails = [];\n\n\t\tif (!socialIds || (Array.isArray(socialIds) && socialIds.length === 0)) {\n\t\t\treturn socialMediaDetails;\n\t\t}\n\n\t\tvar ids = Array.isArray(socialIds) ? socialIds : socialIds.split(',');\n\n\t\tids.forEach(function(id) {\n\t\t\tvar socMediaGR = new GlideRecord(\"x_cadso_automate_style_kit_social_media\");\n\t\t\tif (socMediaGR.get(id)) {\n\t\t\t\tsocialMediaDetails.push({\n\t\t\t\t\ttype: socMediaGR.type,\n\t\t\t\t\tname: socMediaGR.name,\n\t\t\t\t\timage: {\n\t\t\t\t\t\tprefix: socMediaGR.image_prefix,\n\t\t\t\t\t\talt: socMediaGR.image_alt,\n\t\t\t\t\t\tsrc: socMediaGR.image_src,\n\t\t\t\t\t\ttitle: socMediaGR.image_title,\n\t\t\t\t\t\thref: socMediaGR.image_href\n\t\t\t\t\t},\n\t\t\t\t\ttext: socMediaGR.text\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\n\t\treturn socialMediaDetails;\n\t},\n\n/**************** UPDATE STYLE KIT ****************/\n\tupdateStyleKit: function(request, response) {\n\t\tvar requestBody = request.body.data;\n\t\tvar styleKitId = request.pathParams.sys_id;\n\n\t\tif (!styleKitId) {\n\t\t\tresponse.setStatus(400);\n\t\t\tresponse.setBody({\n\t\t\t\tsuccess: false,\n\t\t\t\tmessage: \"No Style Kit ID provided.\"\n\t\t\t});\n\t\t\treturn;\n\t\t}\n\n\t\tvar styleKitGR = new GlideRecord(\"x_cadso_automate_style_kit\");\n\t\tif (!styleKitGR.get(styleKitId)) {\n\t\t\tresponse.setStatus(404);\n\t\t\tresponse.setBody({\n\t\t\t\tsuccess: false,\n\t\t\t\tmessage: \"Style Kit not found.\"\n\t\t\t});\n\t\t\treturn;\n\t\t}\n\n\t\tvar colorIds = [];\n\t\tvar fontIds = [];\n\t\tvar socialMediaIds = [];\n\t\tvar recordsNotUpdated = [];\n\n\t\tif (requestBody.colors && Array.isArray(requestBody.colors)) {\n\t\t\trequestBody.colors.forEach(function(color) {\n\t\t\t\tvar colorGR = new GlideRecord(\"x_cadso_automate_style_kit_color\");\n\t\t\t\tcolorGR.addQuery('color', color);\n\t\t\t\tcolorGR.addQuery('style_kit', styleKitId);\n\t\t\t\tcolorGR.query();\n\t\t\t\tif (colorGR.next()) {\n\t\t\t\t\tcolorGR.setValue('color', color);\n\t\t\t\t\tcolorGR.update();\n\t\t\t\t\tcolorIds.push(colorGR.sys_id);\n\t\t\t\t} else {\n\t\t\t\t\tcolorGR.initialize();\n\t\t\t\t\tcolorGR.setValue('color', color);\n\t\t\t\t\tcolorGR.setValue('style_kit', styleKitId);\n\t\t\t\t\tvar colorId = colorGR.insert();\n\t\t\t\t\tif (colorId) {\n\t\t\t\t\t\tcolorIds.push(colorId);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\tif (requestBody.fonts && Array.isArray(requestBody.fonts)) {\n\t\t\trequestBody.fonts.forEach(function(font) {\n\t\t\t\tvar fontGR = new GlideRecord(\"x_cadso_automate_style_kit_font\");\n\t\t\t\tfontGR.addQuery('name', font.name);\n\t\t\t\tfontGR.addQuery('style_kit', styleKitId);\n\t\t\t\tfontGR.query();\n\n\t\t\t\tif (fontGR.next()) {\n\t\t\t\t\tfontGR.setValue('name', font.name || '');\n\t\t\t\t\tfontGR.setValue('font_family', font.fontFamily || '');\n\t\t\t\t\tfontGR.setValue('url', font.url || '');\n\t\t\t\t\tfontGR.setValue('active', font.active || false);\n\t\t\t\t\tfontGR.setValue('custom', font.custom || false);\n\t\t\t\t\tfontGR.update();\n\t\t\t\t\tfontIds.push(fontGR.sys_id);\n\t\t\t\t} else {\n\t\t\t\t\tfontGR.initialize();\n\t\t\t\t\tfontGR.setValue('name', font.name || '');\n\t\t\t\t\tfontGR.setValue('font_family', font.fontFamily || '');\n\t\t\t\t\tfontGR.setValue('url', font.url || '');\n\t\t\t\t\tfontGR.setValue('active', font.active || false);\n\t\t\t\t\tfontGR.setValue('custom', font.custom || false);\n\t\t\t\t\tfontGR.setValue('style_kit', styleKitId);\n\t\t\t\t\tvar fontId = fontGR.insert();\n\t\t\t\t\tif (fontId) {\n\t\t\t\t\t\tfontIds.push(fontId);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\tif (requestBody.socialIcons && Array.isArray(requestBody.socialIcons)) {\n\t\t\trequestBody.socialIcons.forEach(function(socialIcon) {\n\t\t\t\tvar socialGR = new GlideRecord(\"x_cadso_automate_style_kit_social_media\");\n\t\t\t\tsocialGR.addQuery('name', socialIcon.name);\n\t\t\t\tsocialGR.addQuery('type', socialIcon.type);\n\t\t\t\tsocialGR.addQuery('style_kit', styleKitId);\n\t\t\t\tsocialGR.query();\n\t\t\t\tif (socialGR.next()) {\n\t\t\t\t\tsocialGR.setValue('type', socialIcon.type || '');\n\t\t\t\t\tsocialGR.setValue('name', socialIcon.name || '');\n\t\t\t\t\tsocialGR.setValue('image_prefix', socialIcon.image.prefix || '');\n\t\t\t\t\tsocialGR.setValue('image_alt', socialIcon.image.alt || '');\n\t\t\t\t\tsocialGR.setValue('image_src', socialIcon.image.src || '');\n\t\t\t\t\tsocialGR.setValue('image_title', socialIcon.image.title || '');\n\t\t\t\t\tsocialGR.setValue('image_href', socialIcon.image.href || '');\n\t\t\t\t\tsocialGR.setValue('text', socialIcon.text || '');\n\t\t\t\t\tsocialGR.update();\n\t\t\t\t\tsocialMediaIds.push(socialGR.sys_id);\n\t\t\t\t} else {\n\t\t\t\t\tsocialGR.initialize();\n\t\t\t\t\tsocialGR.setValue('type', socialIcon.type || '');\n\t\t\t\t\tsocialGR.setValue('name', socialIcon.name || '');\n\t\t\t\t\tsocialGR.setValue('image_prefix', socialIcon.image.prefix || '');\n\t\t\t\t\tsocialGR.setValue('image_alt', socialIcon.image.alt || '');\n\t\t\t\t\tsocialGR.setValue('image_src', socialIcon.image.src || '');\n\t\t\t\t\tsocialGR.setValue('image_title', socialIcon.image.title || '');\n\t\t\t\t\tsocialGR.setValue('image_href', socialIcon.image.href || '');\n\t\t\t\t\tsocialGR.setValue('text', socialIcon.text || '');\n\t\t\t\t\tsocialGR.setValue('style_kit', styleKitId);\n\t\t\t\t\tvar socialId = socialGR.insert();\n\t\t\t\t\tif (socialId) {\n\t\t\t\t\t\tsocialMediaIds.push(socialId);\n\n\t\t\t\t\t\tvar styleKitGR = new GlideRecord('x_cadso_automate_style_kit');\n\t\t\t\t\t\tif (styleKitGR.get(styleKitId)) {\n\t\t\t\t\t\t\tstyleKitGR.setValue('social_links', socialMediaIds.join(','));\n\t\t\t\t\t\t\tstyleKitGR.update();\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\tif (requestBody.deleteItems) {\n\t\t\tif (Array.isArray(requestBody.deleteItems.colors)) {\n\t\t\t\trequestBody.deleteItems.colors.forEach(function(color) {\n\t\t\t\t\tvar colorGR = new GlideRecord('x_cadso_automate_style_kit_color');\n\t\t\t\t\tcolorGR.addQuery('color', color);\n\t\t\t\t\tcolorGR.addQuery('style_kit', styleKitId);\n\t\t\t\t\tcolorGR.query();\n\t\t\t\t\twhile (colorGR.next()) {\n\t\t\t\t\t\tcolorGR.deleteRecord();\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tif (Array.isArray(requestBody.deleteItems.fonts)) {\n\t\t\t\trequestBody.deleteItems.fonts.forEach(function(font) {\n\t\t\t\t\tvar fontGR = new GlideRecord('x_cadso_automate_style_kit_font');\n\t\t\t\t\tfontGR.addQuery('name', font);\n\t\t\t\t\tfontGR.addQuery('style_kit', styleKitId);\n\t\t\t\t\tfontGR.query();\n\t\t\t\t\twhile (fontGR.next()) {\n\t\t\t\t\t\tfontGR.deleteRecord();\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tif (Array.isArray(requestBody.deleteItems.socialIcons)) {\n\t\t\t\trequestBody.deleteItems.socialIcons.forEach(function(socialIcon) {\n\t\t\t\t\tvar socialGR = new GlideRecord('x_cadso_automate_style_kit_social_media');\n\t\t\t\t\tsocialGR.addQuery('name', socialIcon);\n\t\t\t\t\tsocialGR.addQuery('style_kit', styleKitId);\n\t\t\t\t\tsocialGR.query();\n\n\t\t\t\t\twhile (socialGR.next()) {\n\t\t\t\t\t\tvar socialSysId = socialGR.getUniqueValue();\n\t\t\t\t\t\tsocialGR.deleteRecord();\n\n\t\t\t\t\t\tvar styleKitGR = new GlideRecord('x_cadso_automate_style_kit');\n\t\t\t\t\t\t\tif (styleKitGR.get(styleKitId)) {\n\t\t\t\t\t\t\t\tvar updatedLinks = socialMediaIds.filter(function(link) {\n\t\t\t\t\t\t\t\t\treturn link.trim() !== socialSysId;\n\t\t\t\t\t\t\t\t});\n\n\t\t\t\t\t\t\t\tstyleKitGR.setValue('social_links', updatedLinks.join(','));\n\t\t\t\t\t\t\t\tstyleKitGR.update();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\n\t\tstyleKitGR.setValue('brand_name', requestBody.brandName || styleKitGR.brand_name);\n\t\tstyleKitGR.setValue('title_font_size_scale', requestBody.header.fontScale || styleKitGR.title_font_size_scale);\n\t\tstyleKitGR.setValue('text_font_size', requestBody.text.fontSize || styleKitGR.text_font_size);\n\t\tstyleKitGR.setValue('text_line_height', requestBody.text.lineHeight || styleKitGR.text_line_height);\n\t\tstyleKitGR.setValue('email_width_default', requestBody.contentWidths.email || styleKitGR.email_width_default);\n\t\tstyleKitGR.setValue('page_width_default', requestBody.contentWidths.page || styleKitGR.page_width_default);\n\n\t\tstyleKitGR.setValue('title_font', requestBody.header.font.name);\n\t\tstyleKitGR.setValue('title_default_color', this.getColorValue(\"x_cadso_automate_style_kit_color\", requestBody.header.textColor));\n\t\tstyleKitGR.setValue('text_font', requestBody.text.font.name);\n\t\tstyleKitGR.setValue('text_default_color', this.getColorValue(\"x_cadso_automate_style_kit_color\", requestBody.text.textColor));\n\t\tstyleKitGR.setValue('text_link_color', this.getColorValue(\"x_cadso_automate_style_kit_color\", requestBody.text.linkColor));\n\t\tstyleKitGR.setValue('button_font', requestBody.button.font.name);\n\t\tstyleKitGR.setValue('button_text_color', this.getColorValue(\"x_cadso_automate_style_kit_color\", requestBody.button.textColor));\n\t\tstyleKitGR.setValue('button_background_color', this.getColorValue(\"x_cadso_automate_style_kit_color\", requestBody.button.backgroundColor));\n\n\t\tstyleKitGR.update();\n\n\t\tresponse.setStatus(200);\n\t\tresponse.setBody({\n\t\t\tsuccess: true,\n\t\t\tmessage: \"Style Kit updated successfully.\",\n\t\t\tstyleKitId: styleKitId,\n\t\t\trecordsNotUpdated: recordsNotUpdated\n\t\t});\n\t\n\t},\n\n\tgetReferenceName: function(tableName, sysId) {\n\t\tvar tableGR = new GlideRecord(tableName);\n\t\tif (tableGR.get(sysId)) {\n\t\t\treturn tableGR.name;\n\t\t} else {\n\t\t\treturn null;\n\t\t}\n\t},\n\n/**************** DELETE STYLE KIT ****************/\n\tdeleteStyleKit: function(request, response) {\n\t\tvar styleKitId = request.pathParams.sys_id;\n\n\t\tif (!styleKitId) {\n\t\t\tresponse.setStatus(400);\n\t\t\tresponse.setBody({\n\t\t\t\tsuccess: false,\n\t\t\t\tmessage: 'Style Kit ID is required.'\n\t\t\t});\n\t\t\treturn;\n\t\t}\n\n\t\tvar styleKitGR = new GlideRecord(\"x_cadso_automate_style_kit\");\n\t\tif (!styleKitGR.get(styleKitId)) {\n\t\t\tresponse.setStatus(404);\n\t\t\tresponse.setBody({\n\t\t\t\tsuccess: false,\n\t\t\t\tmessage: 'Style Kit not found.'\n\t\t\t});\n\t\t\treturn;\n\t\t}\n\n\t\tvar colorGR = new GlideRecord(\"x_cadso_automate_style_kit_color\");\n\t\tcolorGR.addQuery('style_kit', styleKitId);\n\t\tcolorGR.query();\n\t\twhile (colorGR.next()) {\n\t\t\tcolorGR.deleteRecord();\n\t\t}\n\n\t\tvar fontGR = new GlideRecord(\"x_cadso_automate_style_kit_font\");\n\t\tfontGR.addQuery('style_kit', styleKitId);\n\t\tfontGR.query();\n\t\twhile (fontGR.next()) {\n\t\t\tfontGR.deleteRecord();\n\t\t}\n\n\t\tvar socialMediaGR = new GlideRecord(\"x_cadso_automate_style_kit_social_media\");\n\t\tsocialMediaGR.addQuery('style_kit', styleKitId);\n\t\tsocialMediaGR.query();\n\t\twhile (socialMediaGR.next()) {\n\t\t\tsocialMediaGR.deleteRecord();\n\t\t}\n\n\t\tstyleKitGR.deleteRecord();\n\n\t\tresponse.setStatus(200);\n\t\tresponse.setBody({\n\t\t\tsuccess: true,\n\t\t\tmessage: \"Style Kit deleted successfully.\"\n\t\t});\n\t},\n\t\n\ttype: 'StyleKitApiMS'\n};",
    "display_value": "var StyleKitApiMS = Class.create();\nStyleKitApiMS.prototype = {\n    initialize: function() {},\n\t\n/**************** CREATE STYLE KIT ****************/\n\tcreateStyleKit: function(request, response) {\n\t\tvar requestBody = request.body.data;\n\t\t\n\t\tvar colorIds = [];\n\t\tvar fontIds = [];\n\t\tvar socialMediaIds = [];\n\t\t\n\t\tif (requestBody.colors && Array.isArray(requestBody.colors)) {\n\t\t\trequestBody.colors.forEach(function(color) {\n\t\t\t\tvar colorGR = new GlideRecord(\"x_cadso_automate_style_kit_color\");\n\t\t\t\tcolorGR.initialize();\n\t\t\t\tcolorGR.color = color;\n\t\t\t\tvar colorId = colorGR.insert();\n\t\t\t\tif (colorId) {\n\t\t\t\t\tcolorIds.push(colorId);\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t\t\n\t\tif (requestBody.fonts && Array.isArray(requestBody.fonts)) {\n\t\t\trequestBody.fonts.forEach(function(font) {\n\t\t\t\tvar fontGR = new GlideRecord(\"x_cadso_automate_style_kit_font\");\n\t\t\t\tfontGR.initialize();\n\t\t\t\tfontGR.name = font.name || '';\n\t\t\t\tfontGR.font_family = font.fontFamily || '';\n\t\t\t\tfontGR.url = font.url && font.url.trim() !== '' ? font.url : '';\n\t\t\t\tfontGR.active = font.active || false;\n\t\t\t\tfontGR.custom = font.custom || false;\n\n\t\t\t\tvar fontId = fontGR.insert();\n\t\t\t\tif (fontId) {\n\t\t\t\t\tfontIds.push(fontId);\n\t\t\t\t}\n\t\t\t});\n    }\n\t\t\n\t\tif (requestBody.socialIcons && Array.isArray(requestBody.socialIcons)) {\n\t\t\trequestBody.socialIcons.forEach(function(socialIcon) {\n\t\t\t\tvar socialGR = new GlideRecord(\"x_cadso_automate_style_kit_social_media\");\n\t\t\t\tsocialGR.initialize();\n\t\t\t\tsocialGR.type = socialIcon.type || '';\n\t\t\t\tsocialGR.name = socialIcon.name || '';\n\t\t\t\tsocialGR.image_prefix = socialIcon.image.prefix || '';\n\t\t\t\tsocialGR.image_alt = socialIcon.image.alt || '';\n\t\t\t\tsocialGR.image_src = socialIcon.image.src || '';\n\t\t\t\tsocialGR.image_title = socialIcon.image.title || '';\n\t\t\t\tsocialGR.image_href = socialIcon.image.href || '';\n\t\t\t\tsocialGR.text = socialIcon.text || '';\n\n\t\t\t\tvar socialId = socialGR.insert();\n\t\t\t\tif (socialId) {\n\t\t\t\t\tsocialMediaIds.push(socialId);\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t\t\n\t\tvar styleKitGR = new GlideRecord(\"x_cadso_automate_style_kit\");\n\t\tstyleKitGR.initialize();\n\t\t\n\t\tstyleKitGR.brand_name = requestBody.brandName || 'New Style Kit';\n\t\tstyleKitGR.title_font_size_scale = requestBody.header.fontScale || '';\n\t\tvar fontScalesOptions = ['38px,30px,24px', '64px,44px,32px', '110px,68px,42px'];\n\t\tvar fontScale = requestBody.header.fontScale || '';\n\t\tif (fontScalesOptions.indexOf(fontScale) !== -1) {\n\t\t\tstyleKitGR.title_font_size_scale = fontScale;\n\t\t}\n\t\tstyleKitGR.text_font_size = requestBody.text.fontSize || '';\n\t\tstyleKitGR.text_line_height = requestBody.text.lineHeight || '';\n\t\t\t\t\n\t\tstyleKitGR.email_width_default = requestBody.contentWidths.email || '';\n\t\tstyleKitGR.page_width_default = requestBody.contentWidths.page || '';\n\t\t\n\t\tvar styleKitId = styleKitGR.insert();\n\n\t\tif (styleKitId) {\n\n\t\t\tthis.updateRelatedRecords(\"x_cadso_automate_style_kit_color\", colorIds, styleKitId);\n            this.updateRelatedRecords(\"x_cadso_automate_style_kit_font\", fontIds, styleKitId);\n            this.updateRelatedRecords(\"x_cadso_automate_style_kit_social_media\", socialMediaIds, styleKitId);\n\n\t\t\tstyleKitGR.title_font = this.getReferenceId(\"x_cadso_automate_style_kit_font\", requestBody.header.font.name);\n\t\t\tstyleKitGR.title_default_color = this.getColorValue(\"x_cadso_automate_style_kit_color\", requestBody.header.textColor);\n\t\t\tstyleKitGR.text_font = this.getReferenceId(\"x_cadso_automate_style_kit_font\", requestBody.text.font.name);\n\t\t\tstyleKitGR.text_default_color = this.getColorValue(\"x_cadso_automate_style_kit_color\", requestBody.text.textColor);\n\t\t\tstyleKitGR.text_link_color = this.getColorValue(\"x_cadso_automate_style_kit_color\", requestBody.text.linkColor);\n\t\t\tstyleKitGR.button_font = this.getReferenceId(\"x_cadso_automate_style_kit_font\", requestBody.button.font.name);\n\t\t\tstyleKitGR.button_text_color = this.getColorValue(\"x_cadso_automate_style_kit_color\", requestBody.button.textColor);\n\t\t\tstyleKitGR.button_background_color = this.getColorValue(\"x_cadso_automate_style_kit_color\", requestBody.button.backgroundColor);\n\t\t\tif (requestBody.socialIcons && requestBody.socialIcons.length > 0) {\n\t\t\t\tvar socialIds = requestBody.socialIcons.map(function(icon) {\n\t\t\t\t\treturn this.getReferenceId(\"x_cadso_automate_style_kit_social_media\", icon.name);\n\t\t\t\t}, this);\n\t\t\t\tstyleKitGR.social_links = socialIds.join(',');\n\t\t\t}        \n\t\t\tstyleKitGR.update();\n\n\t\t\tresponse.setStatus(201);\n\t\t\tresponse.setBody({\n\t\t\t\tsuccess: true,\n\t\t\t\tmessage: \"Style Kit created successfully.\",\n\t\t\t\tstyleKitId: styleKitId\n\t\t\t});\n\t\t} else {\n\t\t\tresponse.setStatus(500);\n\t\t\tresponse.setBody({\n\t\t\t\tsuccess: false,\n\t\t\t\tmessage: 'Failed to create Style Kit.'\n\t\t\t});\n\t\t}\n\t},\n\n\tupdateRelatedRecords: function(tableName, recordIds, styleKitId) {\n\t\trecordIds.forEach(function(recordId) {\n\t\t\tvar gr = new GlideRecord(tableName);\n\t\t\tif (gr.get(recordId)) {\n\t\t\t\tgr.style_kit = styleKitId;\n\t\t\t\tgr.update();\n\t\t\t}\n\t\t});\n\t},\n\n\tgetColorValue: function(tableName, color) {\n\t\tvar tableGR = new GlideRecord(tableName);\n\t\ttableGR.addQuery('color', color);\n\t\ttableGR.query();\n\t\tif (tableGR.next()) {\n\t\t\treturn tableGR.color;\n\t\t} else {\n\t\t\treturn '';\n\t\t}\n\t},\n\n\tgetReferenceId: function(tableName, name) {\n\t\tvar tableGR = new GlideRecord(tableName);\n\t\ttableGR.addQuery('name', name);\n\t\ttableGR.query();\n\t\tif (tableGR.next()) {\n\t\t\treturn tableGR.getUniqueValue();\n\t\t} else {\n\t\t\treturn '';\n\t\t}\n\t},\n\n\t/**************** GET STYLE KIT ****************/\n\tgetStyleKit: function(request, response) {\n\t\tvar styleKitId = request.pathParams.sys_id;\n\n\t\tif (!styleKitId) {\n\t\t\tresponse.setStatus(400);\n\t\t\tresponse.setBody({\n\t\t\t\tsuccess: false,\n\t\t\t\tmessage: 'Style Kit ID is required.'\n\t\t\t});\n\t\t\treturn;\n\t\t}\n\n\t\tvar styleKitGR = new GlideRecord(\"x_cadso_automate_style_kit\");\n\t\tif (!styleKitGR.get(styleKitId)) {\n\t\t\tresponse.setStatus(404);\n\t\t\tresponse.setBody({\n\t\t\t\tsuccess: false,\n\t\t\t\tmessage: 'Style Kit not found.'\n\t\t\t});\n\t\t\treturn;\n\t\t}\n\n\t\tvar colorVals = this.getRelatedRecordIds(\"x_cadso_automate_style_kit_color\", styleKitId);\n\t\tvar fontIds = this.getRelatedRecordIds(\"x_cadso_automate_style_kit_font\", styleKitId);\n\t\tvar socialMediaIds = this.getRelatedRecordIds(\"x_cadso_automate_style_kit_social_media\", styleKitId);\n\n\t\tvar colors = colorVals.map(function(colorVal) {\n\t\t\treturn this.getColorDetails(colorVal);\n\t\t}, this);\n\n\t\tvar fonts = fontIds.map(function(fontId) {\n\t\t\treturn this.getFontDetails(fontId);\n\t\t}, this);\n\n\t\tvar styleKitData = {\n\t\t\tsysId: styleKitGR.getUniqueValue(),\n\t\t\tbrandName: styleKitGR.brand_name,\n\t\t\tcolors: colors,\n\t\t\tfonts: fonts,\n\t\t\tcontentWidths: {\n\t\t\t\temail: styleKitGR.email_width_default,\n\t\t\t\tpage: styleKitGR.page_width_default\n\t\t\t},\n\t\t\theader: {\n\t\t\t\tfont: this.getFontDetails(styleKitGR.title_font),\n\t\t\t\tfontScale: styleKitGR.title_font_size_scale,\n\t\t\t\ttextColor: this.getRefColors(styleKitGR.title_default_color)\n\t\t\t},\n\t\t\ttext: {\n\t\t\t\tfont: this.getFontDetails(styleKitGR.text_font),\n\t\t\t\tfontSize: styleKitGR.text_font_size,\n\t\t\t\ttextColor: this.getRefColors(styleKitGR.text_default_color),\n\t\t\t\tlinkColor: this.getRefColors(styleKitGR.text_link_color),\n\t\t\t\tlineHeight: styleKitGR.text_line_height\n\t\t\t},\n\t\t\tbutton: {\n\t\t\t\tfont: this.getFontDetails(styleKitGR.button_font),\n\t\t\t\tbackgroundColor: this.getRefColors(styleKitGR.button_background_color),\n\t\t\t\ttextColor: this.getRefColors(styleKitGR.button_text_color)\n\t\t\t},\n\t\t\tsocialIcons: this.getSocialMediaDetails(styleKitGR.social_links)\n\t\t};\n\n\t\tresponse.setStatus(200);\n\t\tresponse.setBody({\n\t\t\tsuccess: true,\n\t\t\tdata: styleKitData\n\t\t});\n\t},\n\n\t/**************** GET STYLE KITS ****************/\n\tgetStyleKits: function(query) {\n\t\tlet response_body = [];\n\t\tvar styleKitGR = new GlideRecordSecure(\"x_cadso_automate_style_kit\");\n\t\tif (query) {\n\t\t\tstyleKitGR.addEncodedQuery(query);\n\t\t}\n\t\tstyleKitGR.query();\n\t\twhile (styleKitGR.next()) {\n\t\t\tconst styleKitId = styleKitGR.getUniqueValue();\n\t\t\tvar colorVals = this.getRelatedRecordIds(\"x_cadso_automate_style_kit_color\", styleKitId);\n\t\t\tvar fontIds = this.getRelatedRecordIds(\"x_cadso_automate_style_kit_font\", styleKitId);\n\t\t\tvar socialMediaIds = this.getRelatedRecordIds(\"x_cadso_automate_style_kit_social_media\", styleKitId);\n\n\t\t\tvar colors = colorVals.map(function(colorVal) {\n\t\t\t\treturn this.getColorDetails(colorVal);\n\t\t\t}, this);\n\n\t\t\tvar fonts = fontIds.map(function(fontId) {\n\t\t\t\treturn this.getFontDetails(fontId);\n\t\t\t}, this);\n\n\t\t\tvar styleKitData = {\n\t\t\t\tsysId: styleKitGR.getUniqueValue(),\n\t\t\t\tbrandName: styleKitGR.brand_name,\n\t\t\t\tcolors: colors,\n\t\t\t\tfonts: fonts,\n\t\t\t\tcontentWidths: {\n\t\t\t\t\temail: styleKitGR.email_width_default,\n\t\t\t\t\tpage: styleKitGR.page_width_default\n\t\t\t\t},\n\t\t\t\theader: {\n\t\t\t\t\tfont: this.getFontDetails(styleKitGR.title_font),\n\t\t\t\t\tfontScale: styleKitGR.title_font_size_scale,\n\t\t\t\t\ttextColor: this.getRefColors(styleKitGR.title_default_color)\n\t\t\t\t},\n\t\t\t\ttext: {\n\t\t\t\t\tfont: this.getFontDetails(styleKitGR.text_font),\n\t\t\t\t\tfontSize: styleKitGR.text_font_size,\n\t\t\t\t\ttextColor: this.getRefColors(styleKitGR.text_default_color),\n\t\t\t\t\tlinkColor: this.getRefColors(styleKitGR.text_link_color),\n\t\t\t\t\tlineHeight: styleKitGR.text_line_height\n\t\t\t\t},\n\t\t\t\tbutton: {\n\t\t\t\t\tfont: this.getFontDetails(styleKitGR.button_font),\n\t\t\t\t\tbackgroundColor: this.getRefColors(styleKitGR.button_background_color),\n\t\t\t\t\ttextColor: this.getRefColors(styleKitGR.button_text_color)\n\t\t\t\t},\n\t\t\t\tsocialIcons: this.getSocialMediaDetails(styleKitGR.social_links)\n\t\t\t};\n\n\t\t\tresponse_body.push(styleKitData);\n\t\t}\n\t\t\n\t\tresponse.setStatus(200);\n\t\tresponse.setBody({\n\t\t\tsuccess: true,\n\t\t\tdata: response_body\n\t\t});\n\t},\n\n\tgetRelatedRecordIds: function(tableName, styleKitId) {\n\t\tvar ids = [];\n\t\tvar tableGR = new GlideRecord(tableName);\n\t\ttableGR.addQuery('style_kit', styleKitId);\n\t\ttableGR.query();\n\t\twhile (tableGR.next()) {\n\t\t\tif (tableName === 'x_cadso_automate_style_kit_color') {\n\t\t\t\tids.push(tableGR.color.toString());\n\t\t\t} else {\n\t\t\t\tids.push(tableGR.getUniqueValue());\n\t\t\t}\n\t\t}\n\t\treturn ids;\n\t},\n\n\tgetFontDetails: function(fontId) {\n\t\tvar fontGR = new GlideRecord(\"x_cadso_automate_style_kit_font\");\n\n\t\tif (fontGR.get(fontId)) {\n\t\t\treturn {\n\t\t\t\tactive: fontGR.active,\n\t\t\t\tcustom: fontGR.custom,\n\t\t\t\tname: fontGR.name,\n\t\t\t\tfontFamily: fontGR.font_family,\n\t\t\t\turl: fontGR.url\n\t\t\t};\n\t\t} else {\n\t\t\treturn null;\n\t\t}\n\t},\n\n\tgetColorDetails: function(colorVal) {\n\t\tvar colorGR = new GlideRecord(\"x_cadso_automate_style_kit_color\");\n\t\tcolorGR.addQuery('color', colorVal);\n\t\tcolorGR.query();\n\n\t\tif (colorGR.next()) {\n\t\t\treturn colorGR.color;\n\t\t} else {\n\t\t\treturn null;\n\t\t}\n\t},\n\n\tgetRefColors: function(colorId) {\n\t\tvar colorGR = new GlideRecord(\"x_cadso_automate_style_kit_color\");\n\n\t\tif (colorGR.get(colorId)) {\n\t\t\treturn colorGR.color;\n\t\t} else {\n\t\t\treturn null;\n\t\t}\n\t},\n\n\tgetSocialMediaDetails: function(socialIds) {\n\t\tvar socialMediaDetails = [];\n\n\t\tif (!socialIds || (Array.isArray(socialIds) && socialIds.length === 0)) {\n\t\t\treturn socialMediaDetails;\n\t\t}\n\n\t\tvar ids = Array.isArray(socialIds) ? socialIds : socialIds.split(',');\n\n\t\tids.forEach(function(id) {\n\t\t\tvar socMediaGR = new GlideRecord(\"x_cadso_automate_style_kit_social_media\");\n\t\t\tif (socMediaGR.get(id)) {\n\t\t\t\tsocialMediaDetails.push({\n\t\t\t\t\ttype: socMediaGR.type,\n\t\t\t\t\tname: socMediaGR.name,\n\t\t\t\t\timage: {\n\t\t\t\t\t\tprefix: socMediaGR.image_prefix,\n\t\t\t\t\t\talt: socMediaGR.image_alt,\n\t\t\t\t\t\tsrc: socMediaGR.image_src,\n\t\t\t\t\t\ttitle: socMediaGR.image_title,\n\t\t\t\t\t\thref: socMediaGR.image_href\n\t\t\t\t\t},\n\t\t\t\t\ttext: socMediaGR.text\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\n\t\treturn socialMediaDetails;\n\t},\n\n/**************** UPDATE STYLE KIT ****************/\n\tupdateStyleKit: function(request, response) {\n\t\tvar requestBody = request.body.data;\n\t\tvar styleKitId = request.pathParams.sys_id;\n\n\t\tif (!styleKitId) {\n\t\t\tresponse.setStatus(400);\n\t\t\tresponse.setBody({\n\t\t\t\tsuccess: false,\n\t\t\t\tmessage: \"No Style Kit ID provided.\"\n\t\t\t});\n\t\t\treturn;\n\t\t}\n\n\t\tvar styleKitGR = new GlideRecord(\"x_cadso_automate_style_kit\");\n\t\tif (!styleKitGR.get(styleKitId)) {\n\t\t\tresponse.setStatus(404);\n\t\t\tresponse.setBody({\n\t\t\t\tsuccess: false,\n\t\t\t\tmessage: \"Style Kit not found.\"\n\t\t\t});\n\t\t\treturn;\n\t\t}\n\n\t\tvar colorIds = [];\n\t\tvar fontIds = [];\n\t\tvar socialMediaIds = [];\n\t\tvar recordsNotUpdated = [];\n\n\t\tif (requestBody.colors && Array.isArray(requestBody.colors)) {\n\t\t\trequestBody.colors.forEach(function(color) {\n\t\t\t\tvar colorGR = new GlideRecord(\"x_cadso_automate_style_kit_color\");\n\t\t\t\tcolorGR.addQuery('color', color);\n\t\t\t\tcolorGR.addQuery('style_kit', styleKitId);\n\t\t\t\tcolorGR.query();\n\t\t\t\tif (colorGR.next()) {\n\t\t\t\t\tcolorGR.setValue('color', color);\n\t\t\t\t\tcolorGR.update();\n\t\t\t\t\tcolorIds.push(colorGR.sys_id);\n\t\t\t\t} else {\n\t\t\t\t\tcolorGR.initialize();\n\t\t\t\t\tcolorGR.setValue('color', color);\n\t\t\t\t\tcolorGR.setValue('style_kit', styleKitId);\n\t\t\t\t\tvar colorId = colorGR.insert();\n\t\t\t\t\tif (colorId) {\n\t\t\t\t\t\tcolorIds.push(colorId);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\tif (requestBody.fonts && Array.isArray(requestBody.fonts)) {\n\t\t\trequestBody.fonts.forEach(function(font) {\n\t\t\t\tvar fontGR = new GlideRecord(\"x_cadso_automate_style_kit_font\");\n\t\t\t\tfontGR.addQuery('name', font.name);\n\t\t\t\tfontGR.addQuery('style_kit', styleKitId);\n\t\t\t\tfontGR.query();\n\n\t\t\t\tif (fontGR.next()) {\n\t\t\t\t\tfontGR.setValue('name', font.name || '');\n\t\t\t\t\tfontGR.setValue('font_family', font.fontFamily || '');\n\t\t\t\t\tfontGR.setValue('url', font.url || '');\n\t\t\t\t\tfontGR.setValue('active', font.active || false);\n\t\t\t\t\tfontGR.setValue('custom', font.custom || false);\n\t\t\t\t\tfontGR.update();\n\t\t\t\t\tfontIds.push(fontGR.sys_id);\n\t\t\t\t} else {\n\t\t\t\t\tfontGR.initialize();\n\t\t\t\t\tfontGR.setValue('name', font.name || '');\n\t\t\t\t\tfontGR.setValue('font_family', font.fontFamily || '');\n\t\t\t\t\tfontGR.setValue('url', font.url || '');\n\t\t\t\t\tfontGR.setValue('active', font.active || false);\n\t\t\t\t\tfontGR.setValue('custom', font.custom || false);\n\t\t\t\t\tfontGR.setValue('style_kit', styleKitId);\n\t\t\t\t\tvar fontId = fontGR.insert();\n\t\t\t\t\tif (fontId) {\n\t\t\t\t\t\tfontIds.push(fontId);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\tif (requestBody.socialIcons && Array.isArray(requestBody.socialIcons)) {\n\t\t\trequestBody.socialIcons.forEach(function(socialIcon) {\n\t\t\t\tvar socialGR = new GlideRecord(\"x_cadso_automate_style_kit_social_media\");\n\t\t\t\tsocialGR.addQuery('name', socialIcon.name);\n\t\t\t\tsocialGR.addQuery('type', socialIcon.type);\n\t\t\t\tsocialGR.addQuery('style_kit', styleKitId);\n\t\t\t\tsocialGR.query();\n\t\t\t\tif (socialGR.next()) {\n\t\t\t\t\tsocialGR.setValue('type', socialIcon.type || '');\n\t\t\t\t\tsocialGR.setValue('name', socialIcon.name || '');\n\t\t\t\t\tsocialGR.setValue('image_prefix', socialIcon.image.prefix || '');\n\t\t\t\t\tsocialGR.setValue('image_alt', socialIcon.image.alt || '');\n\t\t\t\t\tsocialGR.setValue('image_src', socialIcon.image.src || '');\n\t\t\t\t\tsocialGR.setValue('image_title', socialIcon.image.title || '');\n\t\t\t\t\tsocialGR.setValue('image_href', socialIcon.image.href || '');\n\t\t\t\t\tsocialGR.setValue('text', socialIcon.text || '');\n\t\t\t\t\tsocialGR.update();\n\t\t\t\t\tsocialMediaIds.push(socialGR.sys_id);\n\t\t\t\t} else {\n\t\t\t\t\tsocialGR.initialize();\n\t\t\t\t\tsocialGR.setValue('type', socialIcon.type || '');\n\t\t\t\t\tsocialGR.setValue('name', socialIcon.name || '');\n\t\t\t\t\tsocialGR.setValue('image_prefix', socialIcon.image.prefix || '');\n\t\t\t\t\tsocialGR.setValue('image_alt', socialIcon.image.alt || '');\n\t\t\t\t\tsocialGR.setValue('image_src', socialIcon.image.src || '');\n\t\t\t\t\tsocialGR.setValue('image_title', socialIcon.image.title || '');\n\t\t\t\t\tsocialGR.setValue('image_href', socialIcon.image.href || '');\n\t\t\t\t\tsocialGR.setValue('text', socialIcon.text || '');\n\t\t\t\t\tsocialGR.setValue('style_kit', styleKitId);\n\t\t\t\t\tvar socialId = socialGR.insert();\n\t\t\t\t\tif (socialId) {\n\t\t\t\t\t\tsocialMediaIds.push(socialId);\n\n\t\t\t\t\t\tvar styleKitGR = new GlideRecord('x_cadso_automate_style_kit');\n\t\t\t\t\t\tif (styleKitGR.get(styleKitId)) {\n\t\t\t\t\t\t\tstyleKitGR.setValue('social_links', socialMediaIds.join(','));\n\t\t\t\t\t\t\tstyleKitGR.update();\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\tif (requestBody.deleteItems) {\n\t\t\tif (Array.isArray(requestBody.deleteItems.colors)) {\n\t\t\t\trequestBody.deleteItems.colors.forEach(function(color) {\n\t\t\t\t\tvar colorGR = new GlideRecord('x_cadso_automate_style_kit_color');\n\t\t\t\t\tcolorGR.addQuery('color', color);\n\t\t\t\t\tcolorGR.addQuery('style_kit', styleKitId);\n\t\t\t\t\tcolorGR.query();\n\t\t\t\t\twhile (colorGR.next()) {\n\t\t\t\t\t\tcolorGR.deleteRecord();\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tif (Array.isArray(requestBody.deleteItems.fonts)) {\n\t\t\t\trequestBody.deleteItems.fonts.forEach(function(font) {\n\t\t\t\t\tvar fontGR = new GlideRecord('x_cadso_automate_style_kit_font');\n\t\t\t\t\tfontGR.addQuery('name', font);\n\t\t\t\t\tfontGR.addQuery('style_kit', styleKitId);\n\t\t\t\t\tfontGR.query();\n\t\t\t\t\twhile (fontGR.next()) {\n\t\t\t\t\t\tfontGR.deleteRecord();\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tif (Array.isArray(requestBody.deleteItems.socialIcons)) {\n\t\t\t\trequestBody.deleteItems.socialIcons.forEach(function(socialIcon) {\n\t\t\t\t\tvar socialGR = new GlideRecord('x_cadso_automate_style_kit_social_media');\n\t\t\t\t\tsocialGR.addQuery('name', socialIcon);\n\t\t\t\t\tsocialGR.addQuery('style_kit', styleKitId);\n\t\t\t\t\tsocialGR.query();\n\n\t\t\t\t\twhile (socialGR.next()) {\n\t\t\t\t\t\tvar socialSysId = socialGR.getUniqueValue();\n\t\t\t\t\t\tsocialGR.deleteRecord();\n\n\t\t\t\t\t\tvar styleKitGR = new GlideRecord('x_cadso_automate_style_kit');\n\t\t\t\t\t\t\tif (styleKitGR.get(styleKitId)) {\n\t\t\t\t\t\t\t\tvar updatedLinks = socialMediaIds.filter(function(link) {\n\t\t\t\t\t\t\t\t\treturn link.trim() !== socialSysId;\n\t\t\t\t\t\t\t\t});\n\n\t\t\t\t\t\t\t\tstyleKitGR.setValue('social_links', updatedLinks.join(','));\n\t\t\t\t\t\t\t\tstyleKitGR.update();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\n\t\tstyleKitGR.setValue('brand_name', requestBody.brandName || styleKitGR.brand_name);\n\t\tstyleKitGR.setValue('title_font_size_scale', requestBody.header.fontScale || styleKitGR.title_font_size_scale);\n\t\tstyleKitGR.setValue('text_font_size', requestBody.text.fontSize || styleKitGR.text_font_size);\n\t\tstyleKitGR.setValue('text_line_height', requestBody.text.lineHeight || styleKitGR.text_line_height);\n\t\tstyleKitGR.setValue('email_width_default', requestBody.contentWidths.email || styleKitGR.email_width_default);\n\t\tstyleKitGR.setValue('page_width_default', requestBody.contentWidths.page || styleKitGR.page_width_default);\n\n\t\tstyleKitGR.setValue('title_font', requestBody.header.font.name);\n\t\tstyleKitGR.setValue('title_default_color', this.getColorValue(\"x_cadso_automate_style_kit_color\", requestBody.header.textColor));\n\t\tstyleKitGR.setValue('text_font', requestBody.text.font.name);\n\t\tstyleKitGR.setValue('text_default_color', this.getColorValue(\"x_cadso_automate_style_kit_color\", requestBody.text.textColor));\n\t\tstyleKitGR.setValue('text_link_color', this.getColorValue(\"x_cadso_automate_style_kit_color\", requestBody.text.linkColor));\n\t\tstyleKitGR.setValue('button_font', requestBody.button.font.name);\n\t\tstyleKitGR.setValue('button_text_color', this.getColorValue(\"x_cadso_automate_style_kit_color\", requestBody.button.textColor));\n\t\tstyleKitGR.setValue('button_background_color', this.getColorValue(\"x_cadso_automate_style_kit_color\", requestBody.button.backgroundColor));\n\n\t\tstyleKitGR.update();\n\n\t\tresponse.setStatus(200);\n\t\tresponse.setBody({\n\t\t\tsuccess: true,\n\t\t\tmessage: \"Style Kit updated successfully.\",\n\t\t\tstyleKitId: styleKitId,\n\t\t\trecordsNotUpdated: recordsNotUpdated\n\t\t});\n\t\n\t},\n\n\tgetReferenceName: function(tableName, sysId) {\n\t\tvar tableGR = new GlideRecord(tableName);\n\t\tif (tableGR.get(sysId)) {\n\t\t\treturn tableGR.name;\n\t\t} else {\n\t\t\treturn null;\n\t\t}\n\t},\n\n/**************** DELETE STYLE KIT ****************/\n\tdeleteStyleKit: function(request, response) {\n\t\tvar styleKitId = request.pathParams.sys_id;\n\n\t\tif (!styleKitId) {\n\t\t\tresponse.setStatus(400);\n\t\t\tresponse.setBody({\n\t\t\t\tsuccess: false,\n\t\t\t\tmessage: 'Style Kit ID is required.'\n\t\t\t});\n\t\t\treturn;\n\t\t}\n\n\t\tvar styleKitGR = new GlideRecord(\"x_cadso_automate_style_kit\");\n\t\tif (!styleKitGR.get(styleKitId)) {\n\t\t\tresponse.setStatus(404);\n\t\t\tresponse.setBody({\n\t\t\t\tsuccess: false,\n\t\t\t\tmessage: 'Style Kit not found.'\n\t\t\t});\n\t\t\treturn;\n\t\t}\n\n\t\tvar colorGR = new GlideRecord(\"x_cadso_automate_style_kit_color\");\n\t\tcolorGR.addQuery('style_kit', styleKitId);\n\t\tcolorGR.query();\n\t\twhile (colorGR.next()) {\n\t\t\tcolorGR.deleteRecord();\n\t\t}\n\n\t\tvar fontGR = new GlideRecord(\"x_cadso_automate_style_kit_font\");\n\t\tfontGR.addQuery('style_kit', styleKitId);\n\t\tfontGR.query();\n\t\twhile (fontGR.next()) {\n\t\t\tfontGR.deleteRecord();\n\t\t}\n\n\t\tvar socialMediaGR = new GlideRecord(\"x_cadso_automate_style_kit_social_media\");\n\t\tsocialMediaGR.addQuery('style_kit', styleKitId);\n\t\tsocialMediaGR.query();\n\t\twhile (socialMediaGR.next()) {\n\t\t\tsocialMediaGR.deleteRecord();\n\t\t}\n\n\t\tstyleKitGR.deleteRecord();\n\n\t\tresponse.setStatus(200);\n\t\tresponse.setBody({\n\t\t\tsuccess: true,\n\t\t\tmessage: \"Style Kit deleted successfully.\"\n\t\t});\n\t},\n\t\n\ttype: 'StyleKitApiMS'\n};",
    "formatted_script": {
      "line_count": 630,
      "char_count": 20483,
      "preview": "var StyleKitApiMS = Class.create();\nStyleKitApiMS.prototype = {\n    initialize: function() {},\n\t\n/**************** CREATE STYLE KIT ****************/\n\tcreateStyleKit: function(request, response) {\n\t\tv...",
      "full_script": "var StyleKitApiMS = Class.create();\nStyleKitApiMS.prototype = {\n    initialize: function() {},\n\t\n/**************** CREATE STYLE KIT ****************/\n\tcreateStyleKit: function(request, response) {\n\t\tvar requestBody = request.body.data;\n\t\t\n\t\tvar colorIds = [];\n\t\tvar fontIds = [];\n\t\tvar socialMediaIds = [];\n\t\t\n\t\tif (requestBody.colors && Array.isArray(requestBody.colors)) {\n\t\t\trequestBody.colors.forEach(function(color) {\n\t\t\t\tvar colorGR = new GlideRecord(\"x_cadso_automate_style_kit_color\");\n\t\t\t\tcolorGR.initialize();\n\t\t\t\tcolorGR.color = color;\n\t\t\t\tvar colorId = colorGR.insert();\n\t\t\t\tif (colorId) {\n\t\t\t\t\tcolorIds.push(colorId);\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t\t\n\t\tif (requestBody.fonts && Array.isArray(requestBody.fonts)) {\n\t\t\trequestBody.fonts.forEach(function(font) {\n\t\t\t\tvar fontGR = new GlideRecord(\"x_cadso_automate_style_kit_font\");\n\t\t\t\tfontGR.initialize();\n\t\t\t\tfontGR.name = font.name || '';\n\t\t\t\tfontGR.font_family = font.fontFamily || '';\n\t\t\t\tfontGR.url = font.url && font.url.trim() !== '' ? font.url : '';\n\t\t\t\tfontGR.active = font.active || false;\n\t\t\t\tfontGR.custom = font.custom || false;\n\n\t\t\t\tvar fontId = fontGR.insert();\n\t\t\t\tif (fontId) {\n\t\t\t\t\tfontIds.push(fontId);\n\t\t\t\t}\n\t\t\t});\n    }\n\t\t\n\t\tif (requestBody.socialIcons && Array.isArray(requestBody.socialIcons)) {\n\t\t\trequestBody.socialIcons.forEach(function(socialIcon) {\n\t\t\t\tvar socialGR = new GlideRecord(\"x_cadso_automate_style_kit_social_media\");\n\t\t\t\tsocialGR.initialize();\n\t\t\t\tsocialGR.type = socialIcon.type || '';\n\t\t\t\tsocialGR.name = socialIcon.name || '';\n\t\t\t\tsocialGR.image_prefix = socialIcon.image.prefix || '';\n\t\t\t\tsocialGR.image_alt = socialIcon.image.alt || '';\n\t\t\t\tsocialGR.image_src = socialIcon.image.src || '';\n\t\t\t\tsocialGR.image_title = socialIcon.image.title || '';\n\t\t\t\tsocialGR.image_href = socialIcon.image.href || '';\n\t\t\t\tsocialGR.text = socialIcon.text || '';\n\n\t\t\t\tvar socialId = socialGR.insert();\n\t\t\t\tif (socialId) {\n\t\t\t\t\tsocialMediaIds.push(socialId);\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t\t\n\t\tvar styleKitGR = new GlideRecord(\"x_cadso_automate_style_kit\");\n\t\tstyleKitGR.initialize();\n\t\t\n\t\tstyleKitGR.brand_name = requestBody.brandName || 'New Style Kit';\n\t\tstyleKitGR.title_font_size_scale = requestBody.header.fontScale || '';\n\t\tvar fontScalesOptions = ['38px,30px,24px', '64px,44px,32px', '110px,68px,42px'];\n\t\tvar fontScale = requestBody.header.fontScale || '';\n\t\tif (fontScalesOptions.indexOf(fontScale) !== -1) {\n\t\t\tstyleKitGR.title_font_size_scale = fontScale;\n\t\t}\n\t\tstyleKitGR.text_font_size = requestBody.text.fontSize || '';\n\t\tstyleKitGR.text_line_height = requestBody.text.lineHeight || '';\n\t\t\t\t\n\t\tstyleKitGR.email_width_default = requestBody.contentWidths.email || '';\n\t\tstyleKitGR.page_width_default = requestBody.contentWidths.page || '';\n\t\t\n\t\tvar styleKitId = styleKitGR.insert();\n\n\t\tif (styleKitId) {\n\n\t\t\tthis.updateRelatedRecords(\"x_cadso_automate_style_kit_color\", colorIds, styleKitId);\n            this.updateRelatedRecords(\"x_cadso_automate_style_kit_font\", fontIds, styleKitId);\n            this.updateRelatedRecords(\"x_cadso_automate_style_kit_social_media\", socialMediaIds, styleKitId);\n\n\t\t\tstyleKitGR.title_font = this.getReferenceId(\"x_cadso_automate_style_kit_font\", requestBody.header.font.name);\n\t\t\tstyleKitGR.title_default_color = this.getColorValue(\"x_cadso_automate_style_kit_color\", requestBody.header.textColor);\n\t\t\tstyleKitGR.text_font = this.getReferenceId(\"x_cadso_automate_style_kit_font\", requestBody.text.font.name);\n\t\t\tstyleKitGR.text_default_color = this.getColorValue(\"x_cadso_automate_style_kit_color\", requestBody.text.textColor);\n\t\t\tstyleKitGR.text_link_color = this.getColorValue(\"x_cadso_automate_style_kit_color\", requestBody.text.linkColor);\n\t\t\tstyleKitGR.button_font = this.getReferenceId(\"x_cadso_automate_style_kit_font\", requestBody.button.font.name);\n\t\t\tstyleKitGR.button_text_color = this.getColorValue(\"x_cadso_automate_style_kit_color\", requestBody.button.textColor);\n\t\t\tstyleKitGR.button_background_color = this.getColorValue(\"x_cadso_automate_style_kit_color\", requestBody.button.backgroundColor);\n\t\t\tif (requestBody.socialIcons && requestBody.socialIcons.length > 0) {\n\t\t\t\tvar socialIds = requestBody.socialIcons.map(function(icon) {\n\t\t\t\t\treturn this.getReferenceId(\"x_cadso_automate_style_kit_social_media\", icon.name);\n\t\t\t\t}, this);\n\t\t\t\tstyleKitGR.social_links = socialIds.join(',');\n\t\t\t}        \n\t\t\tstyleKitGR.update();\n\n\t\t\tresponse.setStatus(201);\n\t\t\tresponse.setBody({\n\t\t\t\tsuccess: true,\n\t\t\t\tmessage: \"Style Kit created successfully.\",\n\t\t\t\tstyleKitId: styleKitId\n\t\t\t});\n\t\t} else {\n\t\t\tresponse.setStatus(500);\n\t\t\tresponse.setBody({\n\t\t\t\tsuccess: false,\n\t\t\t\tmessage: 'Failed to create Style Kit.'\n\t\t\t});\n\t\t}\n\t},\n\n\tupdateRelatedRecords: function(tableName, recordIds, styleKitId) {\n\t\trecordIds.forEach(function(recordId) {\n\t\t\tvar gr = new GlideRecord(tableName);\n\t\t\tif (gr.get(recordId)) {\n\t\t\t\tgr.style_kit = styleKitId;\n\t\t\t\tgr.update();\n\t\t\t}\n\t\t});\n\t},\n\n\tgetColorValue: function(tableName, color) {\n\t\tvar tableGR = new GlideRecord(tableName);\n\t\ttableGR.addQuery('color', color);\n\t\ttableGR.query();\n\t\tif (tableGR.next()) {\n\t\t\treturn tableGR.color;\n\t\t} else {\n\t\t\treturn '';\n\t\t}\n\t},\n\n\tgetReferenceId: function(tableName, name) {\n\t\tvar tableGR = new GlideRecord(tableName);\n\t\ttableGR.addQuery('name', name);\n\t\ttableGR.query();\n\t\tif (tableGR.next()) {\n\t\t\treturn tableGR.getUniqueValue();\n\t\t} else {\n\t\t\treturn '';\n\t\t}\n\t},\n\n\t/**************** GET STYLE KIT ****************/\n\tgetStyleKit: function(request, response) {\n\t\tvar styleKitId = request.pathParams.sys_id;\n\n\t\tif (!styleKitId) {\n\t\t\tresponse.setStatus(400);\n\t\t\tresponse.setBody({\n\t\t\t\tsuccess: false,\n\t\t\t\tmessage: 'Style Kit ID is required.'\n\t\t\t});\n\t\t\treturn;\n\t\t}\n\n\t\tvar styleKitGR = new GlideRecord(\"x_cadso_automate_style_kit\");\n\t\tif (!styleKitGR.get(styleKitId)) {\n\t\t\tresponse.setStatus(404);\n\t\t\tresponse.setBody({\n\t\t\t\tsuccess: false,\n\t\t\t\tmessage: 'Style Kit not found.'\n\t\t\t});\n\t\t\treturn;\n\t\t}\n\n\t\tvar colorVals = this.getRelatedRecordIds(\"x_cadso_automate_style_kit_color\", styleKitId);\n\t\tvar fontIds = this.getRelatedRecordIds(\"x_cadso_automate_style_kit_font\", styleKitId);\n\t\tvar socialMediaIds = this.getRelatedRecordIds(\"x_cadso_automate_style_kit_social_media\", styleKitId);\n\n\t\tvar colors = colorVals.map(function(colorVal) {\n\t\t\treturn this.getColorDetails(colorVal);\n\t\t}, this);\n\n\t\tvar fonts = fontIds.map(function(fontId) {\n\t\t\treturn this.getFontDetails(fontId);\n\t\t}, this);\n\n\t\tvar styleKitData = {\n\t\t\tsysId: styleKitGR.getUniqueValue(),\n\t\t\tbrandName: styleKitGR.brand_name,\n\t\t\tcolors: colors,\n\t\t\tfonts: fonts,\n\t\t\tcontentWidths: {\n\t\t\t\temail: styleKitGR.email_width_default,\n\t\t\t\tpage: styleKitGR.page_width_default\n\t\t\t},\n\t\t\theader: {\n\t\t\t\tfont: this.getFontDetails(styleKitGR.title_font),\n\t\t\t\tfontScale: styleKitGR.title_font_size_scale,\n\t\t\t\ttextColor: this.getRefColors(styleKitGR.title_default_color)\n\t\t\t},\n\t\t\ttext: {\n\t\t\t\tfont: this.getFontDetails(styleKitGR.text_font),\n\t\t\t\tfontSize: styleKitGR.text_font_size,\n\t\t\t\ttextColor: this.getRefColors(styleKitGR.text_default_color),\n\t\t\t\tlinkColor: this.getRefColors(styleKitGR.text_link_color),\n\t\t\t\tlineHeight: styleKitGR.text_line_height\n\t\t\t},\n\t\t\tbutton: {\n\t\t\t\tfont: this.getFontDetails(styleKitGR.button_font),\n\t\t\t\tbackgroundColor: this.getRefColors(styleKitGR.button_background_color),\n\t\t\t\ttextColor: this.getRefColors(styleKitGR.button_text_color)\n\t\t\t},\n\t\t\tsocialIcons: this.getSocialMediaDetails(styleKitGR.social_links)\n\t\t};\n\n\t\tresponse.setStatus(200);\n\t\tresponse.setBody({\n\t\t\tsuccess: true,\n\t\t\tdata: styleKitData\n\t\t});\n\t},\n\n\t/**************** GET STYLE KITS ****************/\n\tgetStyleKits: function(query) {\n\t\tlet response_body = [];\n\t\tvar styleKitGR = new GlideRecordSecure(\"x_cadso_automate_style_kit\");\n\t\tif (query) {\n\t\t\tstyleKitGR.addEncodedQuery(query);\n\t\t}\n\t\tstyleKitGR.query();\n\t\twhile (styleKitGR.next()) {\n\t\t\tconst styleKitId = styleKitGR.getUniqueValue();\n\t\t\tvar colorVals = this.getRelatedRecordIds(\"x_cadso_automate_style_kit_color\", styleKitId);\n\t\t\tvar fontIds = this.getRelatedRecordIds(\"x_cadso_automate_style_kit_font\", styleKitId);\n\t\t\tvar socialMediaIds = this.getRelatedRecordIds(\"x_cadso_automate_style_kit_social_media\", styleKitId);\n\n\t\t\tvar colors = colorVals.map(function(colorVal) {\n\t\t\t\treturn this.getColorDetails(colorVal);\n\t\t\t}, this);\n\n\t\t\tvar fonts = fontIds.map(function(fontId) {\n\t\t\t\treturn this.getFontDetails(fontId);\n\t\t\t}, this);\n\n\t\t\tvar styleKitData = {\n\t\t\t\tsysId: styleKitGR.getUniqueValue(),\n\t\t\t\tbrandName: styleKitGR.brand_name,\n\t\t\t\tcolors: colors,\n\t\t\t\tfonts: fonts,\n\t\t\t\tcontentWidths: {\n\t\t\t\t\temail: styleKitGR.email_width_default,\n\t\t\t\t\tpage: styleKitGR.page_width_default\n\t\t\t\t},\n\t\t\t\theader: {\n\t\t\t\t\tfont: this.getFontDetails(styleKitGR.title_font),\n\t\t\t\t\tfontScale: styleKitGR.title_font_size_scale,\n\t\t\t\t\ttextColor: this.getRefColors(styleKitGR.title_default_color)\n\t\t\t\t},\n\t\t\t\ttext: {\n\t\t\t\t\tfont: this.getFontDetails(styleKitGR.text_font),\n\t\t\t\t\tfontSize: styleKitGR.text_font_size,\n\t\t\t\t\ttextColor: this.getRefColors(styleKitGR.text_default_color),\n\t\t\t\t\tlinkColor: this.getRefColors(styleKitGR.text_link_color),\n\t\t\t\t\tlineHeight: styleKitGR.text_line_height\n\t\t\t\t},\n\t\t\t\tbutton: {\n\t\t\t\t\tfont: this.getFontDetails(styleKitGR.button_font),\n\t\t\t\t\tbackgroundColor: this.getRefColors(styleKitGR.button_background_color),\n\t\t\t\t\ttextColor: this.getRefColors(styleKitGR.button_text_color)\n\t\t\t\t},\n\t\t\t\tsocialIcons: this.getSocialMediaDetails(styleKitGR.social_links)\n\t\t\t};\n\n\t\t\tresponse_body.push(styleKitData);\n\t\t}\n\t\t\n\t\tresponse.setStatus(200);\n\t\tresponse.setBody({\n\t\t\tsuccess: true,\n\t\t\tdata: response_body\n\t\t});\n\t},\n\n\tgetRelatedRecordIds: function(tableName, styleKitId) {\n\t\tvar ids = [];\n\t\tvar tableGR = new GlideRecord(tableName);\n\t\ttableGR.addQuery('style_kit', styleKitId);\n\t\ttableGR.query();\n\t\twhile (tableGR.next()) {\n\t\t\tif (tableName === 'x_cadso_automate_style_kit_color') {\n\t\t\t\tids.push(tableGR.color.toString());\n\t\t\t} else {\n\t\t\t\tids.push(tableGR.getUniqueValue());\n\t\t\t}\n\t\t}\n\t\treturn ids;\n\t},\n\n\tgetFontDetails: function(fontId) {\n\t\tvar fontGR = new GlideRecord(\"x_cadso_automate_style_kit_font\");\n\n\t\tif (fontGR.get(fontId)) {\n\t\t\treturn {\n\t\t\t\tactive: fontGR.active,\n\t\t\t\tcustom: fontGR.custom,\n\t\t\t\tname: fontGR.name,\n\t\t\t\tfontFamily: fontGR.font_family,\n\t\t\t\turl: fontGR.url\n\t\t\t};\n\t\t} else {\n\t\t\treturn null;\n\t\t}\n\t},\n\n\tgetColorDetails: function(colorVal) {\n\t\tvar colorGR = new GlideRecord(\"x_cadso_automate_style_kit_color\");\n\t\tcolorGR.addQuery('color', colorVal);\n\t\tcolorGR.query();\n\n\t\tif (colorGR.next()) {\n\t\t\treturn colorGR.color;\n\t\t} else {\n\t\t\treturn null;\n\t\t}\n\t},\n\n\tgetRefColors: function(colorId) {\n\t\tvar colorGR = new GlideRecord(\"x_cadso_automate_style_kit_color\");\n\n\t\tif (colorGR.get(colorId)) {\n\t\t\treturn colorGR.color;\n\t\t} else {\n\t\t\treturn null;\n\t\t}\n\t},\n\n\tgetSocialMediaDetails: function(socialIds) {\n\t\tvar socialMediaDetails = [];\n\n\t\tif (!socialIds || (Array.isArray(socialIds) && socialIds.length === 0)) {\n\t\t\treturn socialMediaDetails;\n\t\t}\n\n\t\tvar ids = Array.isArray(socialIds) ? socialIds : socialIds.split(',');\n\n\t\tids.forEach(function(id) {\n\t\t\tvar socMediaGR = new GlideRecord(\"x_cadso_automate_style_kit_social_media\");\n\t\t\tif (socMediaGR.get(id)) {\n\t\t\t\tsocialMediaDetails.push({\n\t\t\t\t\ttype: socMediaGR.type,\n\t\t\t\t\tname: socMediaGR.name,\n\t\t\t\t\timage: {\n\t\t\t\t\t\tprefix: socMediaGR.image_prefix,\n\t\t\t\t\t\talt: socMediaGR.image_alt,\n\t\t\t\t\t\tsrc: socMediaGR.image_src,\n\t\t\t\t\t\ttitle: socMediaGR.image_title,\n\t\t\t\t\t\thref: socMediaGR.image_href\n\t\t\t\t\t},\n\t\t\t\t\ttext: socMediaGR.text\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\n\t\treturn socialMediaDetails;\n\t},\n\n/**************** UPDATE STYLE KIT ****************/\n\tupdateStyleKit: function(request, response) {\n\t\tvar requestBody = request.body.data;\n\t\tvar styleKitId = request.pathParams.sys_id;\n\n\t\tif (!styleKitId) {\n\t\t\tresponse.setStatus(400);\n\t\t\tresponse.setBody({\n\t\t\t\tsuccess: false,\n\t\t\t\tmessage: \"No Style Kit ID provided.\"\n\t\t\t});\n\t\t\treturn;\n\t\t}\n\n\t\tvar styleKitGR = new GlideRecord(\"x_cadso_automate_style_kit\");\n\t\tif (!styleKitGR.get(styleKitId)) {\n\t\t\tresponse.setStatus(404);\n\t\t\tresponse.setBody({\n\t\t\t\tsuccess: false,\n\t\t\t\tmessage: \"Style Kit not found.\"\n\t\t\t});\n\t\t\treturn;\n\t\t}\n\n\t\tvar colorIds = [];\n\t\tvar fontIds = [];\n\t\tvar socialMediaIds = [];\n\t\tvar recordsNotUpdated = [];\n\n\t\tif (requestBody.colors && Array.isArray(requestBody.colors)) {\n\t\t\trequestBody.colors.forEach(function(color) {\n\t\t\t\tvar colorGR = new GlideRecord(\"x_cadso_automate_style_kit_color\");\n\t\t\t\tcolorGR.addQuery('color', color);\n\t\t\t\tcolorGR.addQuery('style_kit', styleKitId);\n\t\t\t\tcolorGR.query();\n\t\t\t\tif (colorGR.next()) {\n\t\t\t\t\tcolorGR.setValue('color', color);\n\t\t\t\t\tcolorGR.update();\n\t\t\t\t\tcolorIds.push(colorGR.sys_id);\n\t\t\t\t} else {\n\t\t\t\t\tcolorGR.initialize();\n\t\t\t\t\tcolorGR.setValue('color', color);\n\t\t\t\t\tcolorGR.setValue('style_kit', styleKitId);\n\t\t\t\t\tvar colorId = colorGR.insert();\n\t\t\t\t\tif (colorId) {\n\t\t\t\t\t\tcolorIds.push(colorId);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\tif (requestBody.fonts && Array.isArray(requestBody.fonts)) {\n\t\t\trequestBody.fonts.forEach(function(font) {\n\t\t\t\tvar fontGR = new GlideRecord(\"x_cadso_automate_style_kit_font\");\n\t\t\t\tfontGR.addQuery('name', font.name);\n\t\t\t\tfontGR.addQuery('style_kit', styleKitId);\n\t\t\t\tfontGR.query();\n\n\t\t\t\tif (fontGR.next()) {\n\t\t\t\t\tfontGR.setValue('name', font.name || '');\n\t\t\t\t\tfontGR.setValue('font_family', font.fontFamily || '');\n\t\t\t\t\tfontGR.setValue('url', font.url || '');\n\t\t\t\t\tfontGR.setValue('active', font.active || false);\n\t\t\t\t\tfontGR.setValue('custom', font.custom || false);\n\t\t\t\t\tfontGR.update();\n\t\t\t\t\tfontIds.push(fontGR.sys_id);\n\t\t\t\t} else {\n\t\t\t\t\tfontGR.initialize();\n\t\t\t\t\tfontGR.setValue('name', font.name || '');\n\t\t\t\t\tfontGR.setValue('font_family', font.fontFamily || '');\n\t\t\t\t\tfontGR.setValue('url', font.url || '');\n\t\t\t\t\tfontGR.setValue('active', font.active || false);\n\t\t\t\t\tfontGR.setValue('custom', font.custom || false);\n\t\t\t\t\tfontGR.setValue('style_kit', styleKitId);\n\t\t\t\t\tvar fontId = fontGR.insert();\n\t\t\t\t\tif (fontId) {\n\t\t\t\t\t\tfontIds.push(fontId);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\tif (requestBody.socialIcons && Array.isArray(requestBody.socialIcons)) {\n\t\t\trequestBody.socialIcons.forEach(function(socialIcon) {\n\t\t\t\tvar socialGR = new GlideRecord(\"x_cadso_automate_style_kit_social_media\");\n\t\t\t\tsocialGR.addQuery('name', socialIcon.name);\n\t\t\t\tsocialGR.addQuery('type', socialIcon.type);\n\t\t\t\tsocialGR.addQuery('style_kit', styleKitId);\n\t\t\t\tsocialGR.query();\n\t\t\t\tif (socialGR.next()) {\n\t\t\t\t\tsocialGR.setValue('type', socialIcon.type || '');\n\t\t\t\t\tsocialGR.setValue('name', socialIcon.name || '');\n\t\t\t\t\tsocialGR.setValue('image_prefix', socialIcon.image.prefix || '');\n\t\t\t\t\tsocialGR.setValue('image_alt', socialIcon.image.alt || '');\n\t\t\t\t\tsocialGR.setValue('image_src', socialIcon.image.src || '');\n\t\t\t\t\tsocialGR.setValue('image_title', socialIcon.image.title || '');\n\t\t\t\t\tsocialGR.setValue('image_href', socialIcon.image.href || '');\n\t\t\t\t\tsocialGR.setValue('text', socialIcon.text || '');\n\t\t\t\t\tsocialGR.update();\n\t\t\t\t\tsocialMediaIds.push(socialGR.sys_id);\n\t\t\t\t} else {\n\t\t\t\t\tsocialGR.initialize();\n\t\t\t\t\tsocialGR.setValue('type', socialIcon.type || '');\n\t\t\t\t\tsocialGR.setValue('name', socialIcon.name || '');\n\t\t\t\t\tsocialGR.setValue('image_prefix', socialIcon.image.prefix || '');\n\t\t\t\t\tsocialGR.setValue('image_alt', socialIcon.image.alt || '');\n\t\t\t\t\tsocialGR.setValue('image_src', socialIcon.image.src || '');\n\t\t\t\t\tsocialGR.setValue('image_title', socialIcon.image.title || '');\n\t\t\t\t\tsocialGR.setValue('image_href', socialIcon.image.href || '');\n\t\t\t\t\tsocialGR.setValue('text', socialIcon.text || '');\n\t\t\t\t\tsocialGR.setValue('style_kit', styleKitId);\n\t\t\t\t\tvar socialId = socialGR.insert();\n\t\t\t\t\tif (socialId) {\n\t\t\t\t\t\tsocialMediaIds.push(socialId);\n\n\t\t\t\t\t\tvar styleKitGR = new GlideRecord('x_cadso_automate_style_kit');\n\t\t\t\t\t\tif (styleKitGR.get(styleKitId)) {\n\t\t\t\t\t\t\tstyleKitGR.setValue('social_links', socialMediaIds.join(','));\n\t\t\t\t\t\t\tstyleKitGR.update();\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\tif (requestBody.deleteItems) {\n\t\t\tif (Array.isArray(requestBody.deleteItems.colors)) {\n\t\t\t\trequestBody.deleteItems.colors.forEach(function(color) {\n\t\t\t\t\tvar colorGR = new GlideRecord('x_cadso_automate_style_kit_color');\n\t\t\t\t\tcolorGR.addQuery('color', color);\n\t\t\t\t\tcolorGR.addQuery('style_kit', styleKitId);\n\t\t\t\t\tcolorGR.query();\n\t\t\t\t\twhile (colorGR.next()) {\n\t\t\t\t\t\tcolorGR.deleteRecord();\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tif (Array.isArray(requestBody.deleteItems.fonts)) {\n\t\t\t\trequestBody.deleteItems.fonts.forEach(function(font) {\n\t\t\t\t\tvar fontGR = new GlideRecord('x_cadso_automate_style_kit_font');\n\t\t\t\t\tfontGR.addQuery('name', font);\n\t\t\t\t\tfontGR.addQuery('style_kit', styleKitId);\n\t\t\t\t\tfontGR.query();\n\t\t\t\t\twhile (fontGR.next()) {\n\t\t\t\t\t\tfontGR.deleteRecord();\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tif (Array.isArray(requestBody.deleteItems.socialIcons)) {\n\t\t\t\trequestBody.deleteItems.socialIcons.forEach(function(socialIcon) {\n\t\t\t\t\tvar socialGR = new GlideRecord('x_cadso_automate_style_kit_social_media');\n\t\t\t\t\tsocialGR.addQuery('name', socialIcon);\n\t\t\t\t\tsocialGR.addQuery('style_kit', styleKitId);\n\t\t\t\t\tsocialGR.query();\n\n\t\t\t\t\twhile (socialGR.next()) {\n\t\t\t\t\t\tvar socialSysId = socialGR.getUniqueValue();\n\t\t\t\t\t\tsocialGR.deleteRecord();\n\n\t\t\t\t\t\tvar styleKitGR = new GlideRecord('x_cadso_automate_style_kit');\n\t\t\t\t\t\t\tif (styleKitGR.get(styleKitId)) {\n\t\t\t\t\t\t\t\tvar updatedLinks = socialMediaIds.filter(function(link) {\n\t\t\t\t\t\t\t\t\treturn link.trim() !== socialSysId;\n\t\t\t\t\t\t\t\t});\n\n\t\t\t\t\t\t\t\tstyleKitGR.setValue('social_links', updatedLinks.join(','));\n\t\t\t\t\t\t\t\tstyleKitGR.update();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\n\t\tstyleKitGR.setValue('brand_name', requestBody.brandName || styleKitGR.brand_name);\n\t\tstyleKitGR.setValue('title_font_size_scale', requestBody.header.fontScale || styleKitGR.title_font_size_scale);\n\t\tstyleKitGR.setValue('text_font_size', requestBody.text.fontSize || styleKitGR.text_font_size);\n\t\tstyleKitGR.setValue('text_line_height', requestBody.text.lineHeight || styleKitGR.text_line_height);\n\t\tstyleKitGR.setValue('email_width_default', requestBody.contentWidths.email || styleKitGR.email_width_default);\n\t\tstyleKitGR.setValue('page_width_default', requestBody.contentWidths.page || styleKitGR.page_width_default);\n\n\t\tstyleKitGR.setValue('title_font', requestBody.header.font.name);\n\t\tstyleKitGR.setValue('title_default_color', this.getColorValue(\"x_cadso_automate_style_kit_color\", requestBody.header.textColor));\n\t\tstyleKitGR.setValue('text_font', requestBody.text.font.name);\n\t\tstyleKitGR.setValue('text_default_color', this.getColorValue(\"x_cadso_automate_style_kit_color\", requestBody.text.textColor));\n\t\tstyleKitGR.setValue('text_link_color', this.getColorValue(\"x_cadso_automate_style_kit_color\", requestBody.text.linkColor));\n\t\tstyleKitGR.setValue('button_font', requestBody.button.font.name);\n\t\tstyleKitGR.setValue('button_text_color', this.getColorValue(\"x_cadso_automate_style_kit_color\", requestBody.button.textColor));\n\t\tstyleKitGR.setValue('button_background_color', this.getColorValue(\"x_cadso_automate_style_kit_color\", requestBody.button.backgroundColor));\n\n\t\tstyleKitGR.update();\n\n\t\tresponse.setStatus(200);\n\t\tresponse.setBody({\n\t\t\tsuccess: true,\n\t\t\tmessage: \"Style Kit updated successfully.\",\n\t\t\tstyleKitId: styleKitId,\n\t\t\trecordsNotUpdated: recordsNotUpdated\n\t\t});\n\t\n\t},\n\n\tgetReferenceName: function(tableName, sysId) {\n\t\tvar tableGR = new GlideRecord(tableName);\n\t\tif (tableGR.get(sysId)) {\n\t\t\treturn tableGR.name;\n\t\t} else {\n\t\t\treturn null;\n\t\t}\n\t},\n\n/**************** DELETE STYLE KIT ****************/\n\tdeleteStyleKit: function(request, response) {\n\t\tvar styleKitId = request.pathParams.sys_id;\n\n\t\tif (!styleKitId) {\n\t\t\tresponse.setStatus(400);\n\t\t\tresponse.setBody({\n\t\t\t\tsuccess: false,\n\t\t\t\tmessage: 'Style Kit ID is required.'\n\t\t\t});\n\t\t\treturn;\n\t\t}\n\n\t\tvar styleKitGR = new GlideRecord(\"x_cadso_automate_style_kit\");\n\t\tif (!styleKitGR.get(styleKitId)) {\n\t\t\tresponse.setStatus(404);\n\t\t\tresponse.setBody({\n\t\t\t\tsuccess: false,\n\t\t\t\tmessage: 'Style Kit not found.'\n\t\t\t});\n\t\t\treturn;\n\t\t}\n\n\t\tvar colorGR = new GlideRecord(\"x_cadso_automate_style_kit_color\");\n\t\tcolorGR.addQuery('style_kit', styleKitId);\n\t\tcolorGR.query();\n\t\twhile (colorGR.next()) {\n\t\t\tcolorGR.deleteRecord();\n\t\t}\n\n\t\tvar fontGR = new GlideRecord(\"x_cadso_automate_style_kit_font\");\n\t\tfontGR.addQuery('style_kit', styleKitId);\n\t\tfontGR.query();\n\t\twhile (fontGR.next()) {\n\t\t\tfontGR.deleteRecord();\n\t\t}\n\n\t\tvar socialMediaGR = new GlideRecord(\"x_cadso_automate_style_kit_social_media\");\n\t\tsocialMediaGR.addQuery('style_kit', styleKitId);\n\t\tsocialMediaGR.query();\n\t\twhile (socialMediaGR.next()) {\n\t\t\tsocialMediaGR.deleteRecord();\n\t\t}\n\n\t\tstyleKitGR.deleteRecord();\n\n\t\tresponse.setStatus(200);\n\t\tresponse.setBody({\n\t\t\tsuccess: true,\n\t\t\tmessage: \"Style Kit deleted successfully.\"\n\t\t});\n\t},\n\t\n\ttype: 'StyleKitApiMS'\n};"
    }
  },
  "sys_class_name": {
    "value": "sys_script_include",
    "display_value": "Script Include"
  },
  "sys_package": {
    "value": "5e9f5f8b87420250369f33373cbb3559",
    "display_value": "Tenon Marketing Automation"
  },
  "sys_update_name": {
    "value": "sys_script_include_b5a945eb873fc210369f33373cbb35ac",
    "display_value": "sys_script_include_b5a945eb873fc210369f33373cbb35ac"
  },
  "sys_updated_by": {
    "value": "admin",
    "display_value": "admin"
  },
  "api_name": {
    "value": "x_cadso_automate.StyleKitApiMS",
    "display_value": "x_cadso_automate.StyleKitApiMS"
  },
  "sys_created_on": {
    "value": "2024-08-09 16:43:49",
    "display_value": "2024-08-09 09:43:49 AM"
  },
  "caller_access": {
    "value": "",
    "display_value": null
  },
  "name": {
    "value": "StyleKitApiMS",
    "display_value": "StyleKitApiMS"
  },
  "sys_name": {
    "value": "StyleKitApiMS",
    "display_value": "StyleKitApiMS"
  },
  "sys_scope": {
    "value": "5e9f5f8b87420250369f33373cbb3559",
    "display_value": "Tenon Marketing Automation"
  },
  "sys_created_by": {
    "value": "desiree.morehouse",
    "display_value": "desiree.morehouse"
  },
  "sys_policy": {
    "value": "read",
    "display_value": "Read-only"
  }
}
